---
title: "input practice"
output: html_notebook
params:
  dat_dir: 
    label: "Choose Attendance File:"
    value: example_1.csv
    input: file
---

```{r getFiles}
# files <- as_tibble(str_split(list.files(dat_dir), "_", simplify = T, 4))

files <- as_tibble(str_split(list.files(params$dat_dir), "_", simplify = T, 4))

files <- files %>% 
  rename(prefix = V1, type = V2, id = V3, id2 = V4) %>% 
  mutate(id = if_else(id == "list", id2, id)) %>% 
  mutate(type = if_else(type == "wait", "wait_list", type)) %>% 
  mutate(download_date = str_sub(id, 8, -5)) %>% 
  mutate(course_id = str_sub(id, 1,7)) %>% 
  mutate(file_name = paste0(dat_dir, "/", prefix, "_", type, "_", course_id, download_date, ".csv")) %>% 
  select(-id2, -id) %>% 
  arrange(type)

files
```